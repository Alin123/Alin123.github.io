<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="我的职业？你知道的，现在想来，我一直想当个面包师的。">
<meta property="og:type" content="website">
<meta property="og:title" content="Alin的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Alin的博客">
<meta property="og:description" content="我的职业？你知道的，现在想来，我一直想当个面包师的。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Alin的博客">
<meta name="twitter:description" content="我的职业？你知道的，现在想来，我一直想当个面包师的。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Alin的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Alin的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">时间教会了我们什么... 坦然的面对生活吗？我想是的～</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/04/swift的数据类型/" itemprop="url">
                  swift的数据类型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-04T12:35:23+08:00" content="2017-06-04">
              2017-06-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Study/" itemprop="url" rel="index">
                    <span itemprop="name">Study</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="枚举Enumerations"><a href="#枚举Enumerations" class="headerlink" title="枚举Enumerations"></a>枚举Enumerations</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">enum CompassPoint &#123;</span><br><span class="line">    case North</span><br><span class="line">    case South</span><br><span class="line">    case East</span><br><span class="line">    case West</span><br><span class="line">&#125;// North,South,East,West是CompassPoint的成员值</span><br><span class="line">var playPoint: CompassPoint = .North</span><br><span class="line">switch playPoint &#123;</span><br><span class="line">case .North:</span><br><span class="line">    print(&quot;\(playPoint)&quot;)</span><br><span class="line">default:</span><br><span class="line">    print(&quot;\(playPoint)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="带有关联值-Associated-Values-的枚举"><a href="#带有关联值-Associated-Values-的枚举" class="headerlink" title="带有关联值(Associated Values)的枚举"></a>带有关联值(Associated Values)的枚举</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">enum Barcode &#123;</span><br><span class="line">    case UPCA(Int, Int, Int)</span><br><span class="line">    case QRCode(String)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var productBarcode: Barcode = .UPCA(8, 42342_40290, 3)</span><br><span class="line">switch productBarcode &#123;</span><br><span class="line">case .UPCA(let numberSystem, let identifier, let check):</span><br><span class="line">    print(&quot;UPC-A with value of \(numberSystem),\(identifier),\(check)&quot;)</span><br><span class="line">case let .QRCode(code):</span><br><span class="line">    print(&quot;QRCode with value of \(code)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="枚举的原始值-Raw-Value"><a href="#枚举的原始值-Raw-Value" class="headerlink" title="枚举的原始值(Raw Value)"></a>枚举的原始值(Raw Value)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">enum Planet: Int &#123;</span><br><span class="line">    case Mercury = 1, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune</span><br><span class="line">&#125;</span><br><span class="line">let earthOrder = Planet.Earth.rawValue</span><br><span class="line">let possiblePlanet = Planet(rawValue: 7)</span><br><span class="line">if let aPlanet = possiblePlanet &#123;</span><br><span class="line">    switch aPlanet &#123;</span><br><span class="line">    case .Earth:</span><br><span class="line">        print(&quot;Safe Place For Humans&quot;)</span><br><span class="line">    default:</span><br><span class="line">        print(&quot;No Life In There&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类和结构体Class-And-Struct"><a href="#类和结构体Class-And-Struct" class="headerlink" title="类和结构体Class And Struct"></a>类和结构体Class And Struct</h3><p><strong>定义</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">struct Resolution &#123;</span><br><span class="line">    var width = 0</span><br><span class="line">    var height = 0</span><br><span class="line">&#125;</span><br><span class="line">class VideoMode &#123;</span><br><span class="line">    var resolution = Resolution()</span><br><span class="line">    var interlaced = false</span><br><span class="line">    var frameRate = 0.0</span><br><span class="line">    var name: String?</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>实例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var aResolution = Resolution()</span><br><span class="line">let aVideoMode = VideoMode()</span><br></pre></td></tr></table></figure>
<p><strong>属性访问</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aVideoMode.resolution = aResolution</span><br><span class="line">aVideoMode.resolution.width</span><br><span class="line">aResolution.width = 320</span><br><span class="line">aResolution.height = 960</span><br><span class="line">aVideoMode.resolution.width</span><br></pre></td></tr></table></figure>
<p><strong>结构体的构造器</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aResolution = Resolution(width: 640, height: 1136)</span><br></pre></td></tr></table></figure>
<p><strong>值类型</strong></p>
<p>所有的基本类型整数Integer、浮点数floating-point、布尔值Booleans、字符串string、数组array、字典dictionary都是值类型，并且在底层都是以结构体的形式实现的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 值类型被赋值给一个变量、常量或当作参数传递给函数的时候，实际上操作的是其的拷贝</span><br><span class="line">var originArray = [1, 2, 3]</span><br><span class="line">var newArray = originArray</span><br><span class="line">originArray[0] = 0</span><br><span class="line">originArray</span><br><span class="line">newArray//数组是值类型，对一个数值实例操作时不会影响另一个。</span><br></pre></td></tr></table></figure>
<p><strong>类是引用类型</strong></p>
<p>被赋值到一个变量、常量或者传递到一个函数时，操作的是引用，而不是拷贝。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var videos = [VideoMode(),VideoMode()]</span><br><span class="line">var anoVideos = videos</span><br><span class="line">var firstVideo = videos.first!</span><br><span class="line">firstVideo.name = &quot;first video&quot;</span><br><span class="line">videos</span><br><span class="line">anoVideos//videos和anoVideos是不同的两个数组实例，但他们包含的元素是类的实例对象是引用类型，数组实例赋值时包含的若是引用类型则不会创建副本，而是多了一个指向引用类型的指针。</span><br></pre></td></tr></table></figure>
<p>等价于===表示两个类类型的常量或者变量引用同一个类实例<br><br>等于== 表示两个实例的值相等或者相同</p>
<h4 id="属性Properties"><a href="#属性Properties" class="headerlink" title="属性Properties"></a>属性Properties</h4><h5 id="存储属性Stored-Properties"><a href="#存储属性Stored-Properties" class="headerlink" title="存储属性Stored Properties"></a>存储属性Stored Properties</h5><ol>
<li>一个存储属性就是存储在特定类和结构体的实例中的一个常量或变量</li>
<li>存储属性将值和数据关联，存储常量或变量作为实例的一部分</li>
<li>可以在定义存储属性的时候指定默认值，也可以在构造过程中设置或修改存储属性的值，甚至修改常量存储属性的值</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">struct FixedLengthRange &#123;// 固定长度的区间</span><br><span class="line">    var firstValue: Int</span><br><span class="line">    let length: Int</span><br><span class="line">&#125;</span><br><span class="line">var rangeOfThree = FixedLengthRange(firstValue: 1, length: 3)</span><br><span class="line">//当值类型的实例被声明成变量的时候，它的属性保持原有的let和var</span><br><span class="line">rangeOfThree.firstValue = 2</span><br><span class="line">//rangeOfThree.length = 5 //cannot assign to property: &apos;length&apos; is a &apos;let&apos; constant</span><br><span class="line">//当值类型的实例被声明成常量的时候，它本身和它的属性都不能被修改</span><br><span class="line">let fiexdRangeOfFour = FixedLengthRange(firstValue: 1, length: 4)</span><br><span class="line">//fiexdRangeOfFour.firstValue = 3 //cannot assign to property: &apos;fiexdRangeOfFour&apos; is a &apos;let&apos; constant</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class FiexdFiveRange &#123;</span><br><span class="line">    var firstValue: Int?</span><br><span class="line">    let length: Int = 5</span><br><span class="line">&#125;</span><br><span class="line">let aFixedRange = FiexdFiveRange()</span><br><span class="line">aFixedRange.firstValue = 0</span><br><span class="line">//aFixedRange.length = 10// cannot assign to property: &apos;length&apos; is a &apos;let&apos; constant</span><br><span class="line">// 类是引用类型，把一个引用类型的实例复制给一个常量(aFixedRange)后，仍可以修改实例的变量属性，但aFixedRange不能引用该类的其他实例</span><br></pre></td></tr></table></figure>
<h5 id="延迟存储属性"><a href="#延迟存储属性" class="headerlink" title="延迟存储属性"></a>延迟存储属性</h5><p>当属性的值依赖依赖于在实例的构造过程结束前无法知道具体值得外部因素时，或属性的值需要复杂大量计算时定义。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class DataImporter &#123;</span><br><span class="line">    //将外部数据文件或数据的表写入到内存，需要消耗不少时间</span><br><span class="line">    var fileName = &quot;data.txt&quot;</span><br><span class="line">&#125;</span><br><span class="line">class DataManager &#123;</span><br><span class="line">    lazy var fileImporter = DataImporter()//必须使用var关键字</span><br><span class="line">    var data = [String]()</span><br><span class="line">&#125;</span><br><span class="line">let manager = DataManager()</span><br><span class="line">manager.data.append(&quot;alin&quot;)</span><br><span class="line">manager.data.append(&quot;shirley&quot;)</span><br><span class="line">manager.fileImporter.fileName = &quot;story.txt&quot;//此时fileImporter才被被创建</span><br></pre></td></tr></table></figure>
<h5 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h5><p>计算属性不存储值，但通过计算属性可以获取、修改关于类的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">struct Point &#123;</span><br><span class="line">    var x = 0.0</span><br><span class="line">    var y = 0.0</span><br><span class="line">&#125;</span><br><span class="line">struct Size &#123;</span><br><span class="line">    var width = 0.0</span><br><span class="line">    var height = 0.0</span><br><span class="line">&#125;</span><br><span class="line">struct Rect &#123;</span><br><span class="line">    var origin = Point()</span><br><span class="line">    var size = Size()</span><br><span class="line">    var center: Point &#123;</span><br><span class="line">        get &#123;</span><br><span class="line">            let centerX = self.origin.x + self.size.width * 0.5</span><br><span class="line">            let centerY = self.origin.y + self.size.height * 0.5</span><br><span class="line">            return Point(x: centerX, y: centerY)</span><br><span class="line">        &#125;</span><br><span class="line">        set(newCenter) &#123;</span><br><span class="line">            self.origin.x = newCenter.x - self.size.width * 0.5</span><br><span class="line">            self.origin.y = newCenter.y - self.size.height * 0.5</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 只有getter没有setter的计算属性就是只读计算属性</span><br><span class="line">struct Cuboid &#123;</span><br><span class="line">    var width = 0.0</span><br><span class="line">    var height = 0.0</span><br><span class="line">    var depth = 0.0</span><br><span class="line">    var volume: Double &#123;//设置一个立方体的体积毫无意义</span><br><span class="line">        return width * height * depth</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="属性观察器"><a href="#属性观察器" class="headerlink" title="属性观察器"></a>属性观察器</h5><ol>
<li>监控和响应属性值的变化，每次属性被设置值得的时候都会调用属性观察器。</li>
<li>可以为除了延迟属性之外的其他存储属性添加属性观察器，也可以通过重载属性的方式为继承的属性添加属性观察器。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class stepCounter &#123;</span><br><span class="line">    var totalSteps: Int = 0 &#123;</span><br><span class="line">        willSet(newSteps) &#123;</span><br><span class="line">            print(&quot;Will set totalSteps to \(newSteps)&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">        didSet &#123;</span><br><span class="line">            let diffValue = totalSteps - oldValue</span><br><span class="line">            if diffValue &gt; 0 &#123;</span><br><span class="line">                print(&quot;Increase \(diffValue) steps&quot;)</span><br><span class="line">            &#125; else if diffValue &lt; 0 &#123;</span><br><span class="line">                print(&quot;Reduce \(-diffValue) steps&quot;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                print(&quot;Dot Move!&quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    func run(step: Int) -&gt; Void &#123;</span><br><span class="line">        self.totalSteps += step</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let alin = stepCounter()</span><br><span class="line">alin.run(step: 10)</span><br><span class="line">alin.run(step: 100)</span><br><span class="line">alin.run(step: -9)</span><br><span class="line">alin.run(step: 0)</span><br></pre></td></tr></table></figure>
<h5 id="类型属性"><a href="#类型属性" class="headerlink" title="类型属性"></a>类型属性</h5><ol>
<li>用于定义特定类型所有实例共享的数据，不管类型有多少实例，这些属性都只有唯一一份。</li>
<li>跟实例的存储型属性不同，必须给存储型类型属性指定默认值，因为类型本身没有构造器，也就无法在初始化过程中使用构造器给类型属性赋值。</li>
<li>存储型类型属性可以是变量或常量，计算型类型属性跟实例的计算型属性一样只能定义成变量属性。</li>
<li>存储型类型属性是延迟初始化的，它们只有在第一次被访问的时候才会被初始化。即使它们被多个线程同时访问，系统也保证只会对其进行一次初始化，并且不需要对其使用 lazy 修饰符。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">struct AudioChannel &#123;</span><br><span class="line">    static let thresholdLevel = 10//声音电平的最大上限阈值,static标记类型属性在值类型里面</span><br><span class="line">    static var maxInputLevelForAllChannels = 0//所有AudioChannel实例的电平值的最大值</span><br><span class="line">    var currentLevel: Int = 0 &#123;</span><br><span class="line">        didSet &#123;</span><br><span class="line">            if currentLevel &gt; AudioChannel.thresholdLevel &#123;// 输入检测</span><br><span class="line">                currentLevel = AudioChannel.thresholdLevel</span><br><span class="line">            &#125;</span><br><span class="line">            if currentLevel &gt; AudioChannel.maxInputLevelForAllChannels &#123;// 调整类型的类型属性的值</span><br><span class="line">                AudioChannel.maxInputLevelForAllChannels = currentLevel</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="方法-Methods-与特定类型相关的方法"><a href="#方法-Methods-与特定类型相关的方法" class="headerlink" title="方法 Methods:与特定类型相关的方法"></a>方法 Methods:与特定类型相关的方法</h4><h5 id="实例方法Instance-Method"><a href="#实例方法Instance-Method" class="headerlink" title="实例方法Instance Method"></a>实例方法Instance Method</h5><p>属于某个特定类、结构体或者枚举类型实例的方法，实例方法不能脱离于现存的实例而被调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">func add(first: Int, second: Int) -&gt; Int &#123;</span><br><span class="line">    return first + second;</span><br><span class="line">&#125;</span><br><span class="line">add(first: 1, second: 1)</span><br><span class="line"></span><br><span class="line">class Counter &#123;</span><br><span class="line">    var count = 0</span><br><span class="line">    func increment() -&gt; Void &#123;</span><br><span class="line">        count += 1</span><br><span class="line">    &#125;</span><br><span class="line">    func incrementBy(amount: Int) -&gt; Void &#123;</span><br><span class="line">        count += amount</span><br><span class="line">    &#125;</span><br><span class="line">    func incrementBy(amount: Int, numberOfTimes: Int) -&gt; Void &#123;</span><br><span class="line">        count += amount * numberOfTimes</span><br><span class="line">    &#125;</span><br><span class="line">    func reset() -&gt; Void &#123;</span><br><span class="line">        count = 0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let count = Counter()</span><br><span class="line">count.incrementBy(amount: 5, numberOfTimes: 3)</span><br><span class="line">// self属性:类型的每一个实例都有一个隐含属性叫作self，self完全等同于该实例本身，可以在实例方法中使用这个隐含的self属性来引用当前实例</span><br></pre></td></tr></table></figure>
<h5 id="变异方法mutating-method"><a href="#变异方法mutating-method" class="headerlink" title="变异方法mutating method"></a>变异方法mutating method</h5><p>结构体和枚举是值类型，一般情况下值类型的属性不能在它的实例方法中被修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">struct StructPoint &#123;</span><br><span class="line">    var x = 0.0</span><br><span class="line">    var y = 0.0</span><br><span class="line">    mutating func moveBy(deltaX: Double, deltaY: Double) -&gt; Void &#123;</span><br><span class="line">        self.x += deltaX</span><br><span class="line">        self.y += deltaY</span><br><span class="line">    &#125;</span><br><span class="line">    mutating func moveTo(x: Double, y: Double) -&gt; Void &#123;// 在变异方法中给self赋值</span><br><span class="line">        self = StructPoint(x: x, y: y)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">enum TriStateSwitch &#123;</span><br><span class="line">    case Off, Low, High</span><br><span class="line">    mutating func next() -&gt; Void &#123;</span><br><span class="line">        switch self &#123;</span><br><span class="line">        case .Off:</span><br><span class="line">            self = .Low</span><br><span class="line">        case .Low:</span><br><span class="line">            self = .High</span><br><span class="line">        case .High:</span><br><span class="line">            self = .Off</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="类型方法Type-Method"><a href="#类型方法Type-Method" class="headerlink" title="类型方法Type Method"></a>类型方法Type Method</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">struct LevelTracker &#123;//多个玩家玩同一个游戏，有一个解锁了一个等级，其他玩家即可到达该等级</span><br><span class="line">    static var highestUnlockedLevel = 1// 一个类属性记录所有玩家能到达的最高等级</span><br><span class="line">    static func unlockLevel(level: Int) &#123;// 类型方法可直接引用类属性</span><br><span class="line">        if level &gt; highestUnlockedLevel &#123;</span><br><span class="line">            highestUnlockedLevel = level</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    static func levelIsUnlocked(level: Int) -&gt; Bool &#123;</span><br><span class="line">        return level &lt;= highestUnlockedLevel</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    var currentLevel = 1</span><br><span class="line">    mutating func advanceToLevel(level: Int) -&gt; Bool &#123;</span><br><span class="line">        if LevelTracker.levelIsUnlocked(level: level)  &#123;</span><br><span class="line">            currentLevel = level</span><br><span class="line">            return true</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Player  &#123;</span><br><span class="line">    var tracker = LevelTracker()</span><br><span class="line">    let playerName: String</span><br><span class="line">    func completeLevel(level: Int) -&gt; Void &#123;</span><br><span class="line">        LevelTracker.unlockLevel(level: level + 1)</span><br><span class="line">        tracker.advanceToLevel(level: level + 1)</span><br><span class="line">    &#125;</span><br><span class="line">    init(name: String) &#123;</span><br><span class="line">        playerName = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let alinPlayer = Player(name: &quot;alin&quot;)</span><br><span class="line">alinPlayer.completeLevel(level: 5)</span><br><span class="line"></span><br><span class="line">let shirleyPlayer = Player(name: &quot;shirley&quot;)</span><br><span class="line">let wantLevel = 10</span><br><span class="line">if shirleyPlayer.tracker.advanceToLevel(level: wantLevel) &#123;</span><br><span class="line">    print(&quot;\(shirleyPlayer.playerName) now is \(shirleyPlayer.tracker.currentLevel)&quot;)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    print(&quot;Target level may locked. \(shirleyPlayer.playerName) cannot advance to level \(wantLevel)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="下标脚本Subscripts"><a href="#下标脚本Subscripts" class="headerlink" title="下标脚本Subscripts"></a>下标脚本Subscripts</h4><p>定义在类（class）、结构体（structure）和枚举（enumeration）中，是访问集合（collection），列表（list）或序列（sequence）中元素的快捷方式。可以使用下标的索引，设置和获取值，而不需要再调用对应的存取方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//下标语法：通过在实例名称后面的方括号中传入一个或者多个索引值来对实例进行存取。</span><br><span class="line">struct Matrix &#123;</span><br><span class="line">    let rows: Int</span><br><span class="line">    let columns: Int</span><br><span class="line">    var grid: [Double]</span><br><span class="line">    init(rows: Int, columns: Int) &#123;</span><br><span class="line">        self.rows = rows</span><br><span class="line">        self.columns = columns</span><br><span class="line">        self.grid = Array(repeating: 0.0, count: rows * columns)</span><br><span class="line">    &#125;</span><br><span class="line">    func indexIsValidFor(row: Int, column: Int) -&gt; Bool &#123;</span><br><span class="line">        return row &gt;= 0 &amp;&amp; column &gt;= 0 &amp;&amp; row &lt; rows &amp;&amp; column &lt; columns</span><br><span class="line">    &#125;</span><br><span class="line">    subscript(row: Int, column: Int) -&gt; Double &#123;</span><br><span class="line">        get &#123;</span><br><span class="line">            assert(self.indexIsValidFor(row: row, column: column), &quot;Index out of range&quot;)</span><br><span class="line">            return grid[(row * columns) + column]</span><br><span class="line">        &#125;</span><br><span class="line">        set(newValue) &#123;</span><br><span class="line">            assert(self.indexIsValidFor(row: row, column: column), &quot;Index out of range&quot;)</span><br><span class="line">            grid[(row * columns) + column] = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var matrix = Matrix(rows: 3, columns: 5)</span><br><span class="line">matrix[0, 1]</span><br><span class="line">matrix[2, 3] = 2.3</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/04/swift的函数与方法/" itemprop="url">
                  swift的函数与方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-04T11:18:40+08:00" content="2017-06-04">
              2017-06-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Study/" itemprop="url" rel="index">
                    <span itemprop="name">Study</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Function-函数是用来完成特定任务的独立的代码块"><a href="#Function-函数是用来完成特定任务的独立的代码块" class="headerlink" title="Function: 函数是用来完成特定任务的独立的代码块"></a>Function: 函数是用来完成特定任务的独立的代码块</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">func sayHello(persionName: String) -&gt; String&#123;</span><br><span class="line">    let greeting = &quot;hello, &quot; + persionName + &quot;!&quot;</span><br><span class="line">    return greeting</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>多个输入参数的函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func halfOpenRangeLength(start: Int, end: Int) -&gt; Int&#123;</span><br><span class="line">    return end - start</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>无参函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func sayHelloWorld() -&gt; String &#123;</span><br><span class="line">    return &quot;hello world&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>无返回值的函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func sayGoodbye(personName: String) &#123;</span><br><span class="line">    print(&quot;Goodbye, \(personName)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>严格上来说，虽然没有返回值被定义，sayGoodbye 函数依然返回了值。没有定义返回类型的函数会返回特殊的值，叫 Void。它其实是一个空的元组（tuple），没有任何元素，可以写成()。</em></strong></p>
<p><strong>多个返回值的函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">func count(string: String) -&gt; (vowels: Int, consonants: Int, others: Int)&#123;</span><br><span class="line">    var vowels = 0, consonants = 0, others = 0</span><br><span class="line">    for character in string.characters &#123;</span><br><span class="line">        switch String(character).lowercased() &#123;</span><br><span class="line">            case &quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;0&quot;, &quot;u&quot;:</span><br><span class="line">            vowels += 1</span><br><span class="line">            case &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;:</span><br><span class="line">            consonants += 1</span><br><span class="line">        default:</span><br><span class="line">            others += 1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return (vowels, consonants, others)</span><br><span class="line">&#125;</span><br><span class="line">//可选元组返回类型(optianal Tuple return types)</span><br><span class="line">func minMax(array: [Int]) -&gt; (Int, Int)? &#123;</span><br><span class="line">    if array.isEmpty &#123;</span><br><span class="line">        return nil</span><br><span class="line">    &#125;</span><br><span class="line">    var min = array[0]</span><br><span class="line">    var max = array[0]</span><br><span class="line">    for item in array[1..&lt;array.count] &#123;</span><br><span class="line">        if item &lt; min &#123;</span><br><span class="line">            min = item</span><br><span class="line">        &#125;</span><br><span class="line">        if item &gt; max &#123;</span><br><span class="line">            max = item</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return (min, max)</span><br><span class="line">&#125;</span><br><span class="line">let bounds = minMax(array: [5, 2, 5, 6, 7, 2])</span><br><span class="line">if let (min, max) = bounds &#123;</span><br><span class="line">    print(&quot;min = \(min), max = \(max)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>函数参数标签和参数名称(Function Argument Labels and Parameters Names)</code>:每个函数参数都有一个参数标签(argument label)以及一个参数名称(parameter name)。参数标签在调用函数的时候使用；调用的时候需要将函数的参数标签写在对应的参数前面。参数名称在函数的实现中使用。默认情况下，函数参数使用参数名称来作为它们的参数标签。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">func join(aString s1: String, toString s2: String, withJoiner joiner: String) -&gt; String &#123;</span><br><span class="line">    return s1 + joiner + s2//sString为参数标签Argument Labels，s1为函数内部使用的参数名称Parameters Names</span><br><span class="line">&#125;</span><br><span class="line">join(aString: &quot;Hello&quot;, toString: &quot;world&quot;, withJoiner: &quot;,&quot;)//带有描述性的参数标签</span><br></pre></td></tr></table></figure>
<p><strong>用_忽略参数标签</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func containesCharacter(_ string: String, _ characterToFind: Character) -&gt; Bool&#123;</span><br><span class="line">    for character in string.characters &#123;</span><br><span class="line">        if character == characterToFind &#123;</span><br><span class="line">            return true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return false</span><br><span class="line">&#125;</span><br><span class="line">let containsAVee = containesCharacter(&quot;aardvark&quot;, &quot;v&quot;)</span><br></pre></td></tr></table></figure>
<p><strong>默认参数值(Default Parameter Values)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//注意如果使用默认参数那么此参数名将默认作为外部参数名（此时局部参数名和外部参数名相同）</span><br><span class="line">func new_join(string: String, toTheString: String, joiner: String = &quot; &quot;) -&gt; String&#123;</span><br><span class="line">    return string + joiner + toTheString;</span><br><span class="line">&#125;</span><br><span class="line">new_join(string: &quot;abc&quot;, toTheString: &quot;xyz&quot;, joiner: &quot;,&quot;)</span><br><span class="line">new_join(string: &quot;abc&quot;, toTheString: &quot;xyz&quot;)//可省去带有默认值的参数</span><br></pre></td></tr></table></figure>
<p><strong>可变参数(Variadic Parameters)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func arithmeticMean(_ numbers: Double...) -&gt; Double&#123;</span><br><span class="line">    var total: Double = 0</span><br><span class="line">    for number in numbers&#123;</span><br><span class="line">        total += number</span><br><span class="line">    &#125;</span><br><span class="line">    return total / Double(numbers.count)</span><br><span class="line">&#125;</span><br><span class="line">//注意： 一个函数至多能有一个可变参数，而且它必须是参数表中最后的一个。这样做是为了避免函数调用时出现歧义。</span><br><span class="line">arithmeticMean(1,2,3,4,5,6)</span><br><span class="line">arithmeticMean(1,2,3)</span><br></pre></td></tr></table></figure>
<p><strong>输入输出参数(In－Out Parameters)</strong></p>
<ol>
<li>如果你想要一个函数可以修改参数的值，并且想要在这些修改在函数调用后仍然存在，那么就应该把这个参数定义为输入输出参数</li>
<li>定义一个输入输出参数时，在参数定义前加 inout 关键字。一个输入输出参数有传入函数的值，这个值被函数修改，然后被传出函数，替换原来的值。</li>
<li>你只能将变量作为输入输出参数。你不能传入常量或者字面量（literal value），因为这些量是不能被修改的。当传入的参数作为输入输出参数时，需要在参数前加&amp;符，表示这个值可以被函数修改。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//注意：输入输出参数不能有默认值，而且可变参数不能用inout标记</span><br><span class="line">func swapTwoInts( a: inout Int, b: inout Int)&#123;</span><br><span class="line">    let temporaryA = a</span><br><span class="line">    a = b</span><br><span class="line">    b = temporaryA</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var someInt = 3</span><br><span class="line">var anotherInt = 107</span><br><span class="line">swapTwoInts(a: &amp;someInt, b: &amp;anotherInt)</span><br></pre></td></tr></table></figure>
<p><strong>函数类型作为参数类型(function types as parameters types)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func printMathResult(mathFunction: (Int, Int) -&gt; Int, a: Int, b: Int)&#123;</span><br><span class="line">    print(&quot;Result: \(mathFunction(a,b))&quot;)</span><br><span class="line">&#125;</span><br><span class="line">func addInts(a: Int, b:Int) -&gt; Int&#123;</span><br><span class="line">    return a + b</span><br><span class="line">&#125;</span><br><span class="line">let mathFunc:(Int, Int) -&gt; Int = addInts</span><br><span class="line">printMathResult(mathFunction: mathFunc, a: 5, b: 6)</span><br><span class="line">printMathResult(mathFunction: &#123; (a, b) -&gt; Int in</span><br><span class="line">    return b</span><br><span class="line">&#125;, a: 10, b: 20)</span><br><span class="line">printMathResult(mathFunction: &#123; (a, b) -&gt; Int in</span><br><span class="line">    a + b</span><br><span class="line">&#125;, a: 10, b: 20)</span><br></pre></td></tr></table></figure>
<p><strong>函数作为返回值(function type as return types)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func stepForward(intput: Int) -&gt; Int&#123;</span><br><span class="line">    return intput + 1</span><br><span class="line">&#125;</span><br><span class="line">func stepBackward(input: Int) -&gt; Int&#123;</span><br><span class="line">    return input - 1</span><br><span class="line">&#125;</span><br><span class="line">func chooseStepFunction(backwards: Bool) -&gt; (Int) -&gt; Int&#123;</span><br><span class="line">    return backwards ? stepBackward : stepForward</span><br><span class="line">&#125;</span><br><span class="line">var currentVale = 3</span><br><span class="line">let moveNearerToZero = chooseStepFunction(backwards: currentVale &gt; 0)</span><br><span class="line">print(&quot;counting to zero:&quot;)</span><br><span class="line">while currentVale != 0&#123;</span><br><span class="line">    print(&quot;\(currentVale)...&quot;)</span><br><span class="line">    currentVale = moveNearerToZero(currentVale)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>嵌套函数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func _chooseStepFunction(backwards: Bool) -&gt; (Int) -&gt; Int &#123;</span><br><span class="line">    func stepForward(input: Int) -&gt; Int &#123; return input + 1 &#125;</span><br><span class="line">    func stepBackward(input: Int) -&gt; Int &#123; return input - 1 &#125;</span><br><span class="line">    return backwards ? stepBackward : stepForward</span><br><span class="line">&#125;</span><br><span class="line">var currentValue = -4</span><br><span class="line">let _moveNearerToZero = _chooseStepFunction(backwards: currentValue &gt; 0)</span><br><span class="line">while currentValue != 0 &#123;</span><br><span class="line">    print(&quot;\(currentValue)... &quot;)</span><br><span class="line">    currentValue = _moveNearerToZero(currentValue)</span><br><span class="line">&#125;</span><br><span class="line">print(&quot;zero!&quot;)</span><br><span class="line">// -4...</span><br><span class="line">// -3...</span><br><span class="line">// -2...</span><br><span class="line">// -1...</span><br><span class="line">// zero!</span><br></pre></td></tr></table></figure>
<p><strong>闭包</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; ( parameters ) -&gt; returnType in</span><br><span class="line">   statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//闭包会捕获一定作用域内的常亮或者变量进而闭合并包裹着</span><br><span class="line">func add()-&gt; ()-&gt;Int&#123;</span><br><span class="line">    var total = 0</span><br><span class="line">    var step = 1</span><br><span class="line">    func fn()-&gt;Int&#123;</span><br><span class="line">        total += step</span><br><span class="line">        return total</span><br><span class="line">    &#125;</span><br><span class="line">    return fn</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = add()</span><br><span class="line">a()</span><br><span class="line">a() //a保存了total的副本</span><br><span class="line"></span><br><span class="line">var b = add()</span><br><span class="line">b() //说明a和b单独保存了total的副本</span><br><span class="line"></span><br><span class="line">var c = b</span><br><span class="line">c() //说明闭包是引用类型，也就是说函数是引用类型</span><br></pre></td></tr></table></figure>
<p><strong>尾随闭包</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var array = [&quot;Alin&quot;, &quot;Shirley&quot;, &quot;Tom&quot;, &quot;Joke&quot;]</span><br><span class="line">array.sorted &#123; (a, b) -&gt; Bool in</span><br><span class="line">    a &gt; b</span><br><span class="line">&#125;</span><br><span class="line">let digitNames = [</span><br><span class="line">    0: &quot;Zero&quot;, 1: &quot;One&quot;, 2: &quot;Two&quot;, 3: &quot;Three&quot;, 4: &quot;Four&quot;,</span><br><span class="line">    5: &quot;Five&quot;, 6: &quot;Six&quot;, 7: &quot;Seven&quot;, 8: &quot;Eight&quot;, 9: &quot;Nine&quot;</span><br><span class="line">]</span><br><span class="line">let numbers = [2017, 04, 20];</span><br><span class="line">numbers.map &#123; (number) -&gt; String in</span><br><span class="line">    var number = number</span><br><span class="line">    var result = &quot;&quot;</span><br><span class="line">    repeat &#123;</span><br><span class="line">        result = digitNames[number % 10]! + result</span><br><span class="line">        number /= 10</span><br><span class="line">    &#125; while number &gt; 0</span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/17/swift的基本数据结构和控制语句/" itemprop="url">
                  swift的基本数据结构和控制语句
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-17T11:19:49+08:00" content="2017-04-17">
              2017-04-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Study/" itemprop="url" rel="index">
                    <span itemprop="name">Study</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基本数据结构"><a href="#基本数据结构" class="headerlink" title="基本数据结构"></a>基本数据结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let myArray:[Int] = [1, 2, 3, 4, 5]</span><br><span class="line">let newArray = myArray.map(&#123;number in 3 * number&#125;)</span><br><span class="line">newArray</span><br></pre></td></tr></table></figure>
<h4 id="字符串和字符-String-and-Characters"><a href="#字符串和字符-String-and-Characters" class="headerlink" title="字符串和字符(String and Characters)"></a>字符串和字符(String and Characters)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var myWords = &quot;alin&quot;</span><br><span class="line">myWords += &quot; love shirley&quot;</span><br><span class="line">var yourWords = myWords //字符串是值类型(Strings are Value Type)</span><br><span class="line">myWords += &quot; !!!&quot;</span><br></pre></td></tr></table></figure>
<p>// 当进行变量、常量赋值操作或将其当作传递给一个函数时会进行值拷贝，从而产生新的副本(yourWords)，赋值后改变myWords，yourWords不变。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for character in yourWords.characters &#123;</span><br><span class="line">    print(character)</span><br><span class="line">&#125;</span><br><span class="line">yourWords.lengthOfBytes(using: .unicode)</span><br><span class="line">yourWords.lengthOfBytes(using: .utf16)</span><br><span class="line">yourWords.lengthOfBytes(using: .utf8)</span><br><span class="line">yourWords.lengthOfBytes(using: .ascii)</span><br><span class="line"></span><br><span class="line">yourWords.append(&quot; very much!&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let a = 3</span><br><span class="line">let b = 2</span><br><span class="line">let sum = &quot;\(a) + \(b) = \(a + b)&quot;//字符串插值(String Interpolation)</span><br><span class="line"></span><br><span class="line">sum.utf16</span><br><span class="line">sum.utf8</span><br><span class="line">sum.unicodeScalars</span><br><span class="line">for item in sum.unicodeScalars &#123;</span><br><span class="line">    print(&quot;\(item.value)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="集合：数组"><a href="#集合：数组" class="headerlink" title="集合：数组"></a>集合：数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var shoppingList:[String] = [&quot;Milk&quot;,&quot;Eggs&quot;]</span><br><span class="line">shoppingList.append(&quot;Flour&quot;)</span><br><span class="line">shoppingList += [&quot;Apple&quot;,&quot;Orange&quot;,&quot;Banana&quot;]</span><br><span class="line">shoppingList[0...3] = [&quot;0~3replaced&quot;]</span><br><span class="line">shoppingList</span><br><span class="line">shoppingList.insert(&quot;Bread&quot;, at: 0)</span><br><span class="line"></span><br><span class="line">for item in shoppingList &#123;</span><br><span class="line">    print(item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for (index, item) in shoppingList.enumerated() &#123;</span><br><span class="line">    print(&quot;item at \(index) is \(item)&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var threeDouble = [Double](repeating: 0.0, count: 3)</span><br></pre></td></tr></table></figure>
<h4 id="集合：字典"><a href="#集合：字典" class="headerlink" title="集合：字典"></a>集合：字典</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var dict = [&quot;0&quot;:0, &quot;1&quot;:1, &quot;2&quot;:2]</span><br><span class="line">dict[&quot;3&quot;] = 3</span><br><span class="line">dict.updateValue(4, forKey: &quot;4&quot;)</span><br><span class="line">for (key, value) in dict &#123;</span><br><span class="line">    print(&quot;key:\(key) value:\(value)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h2><h4 id="forin语句"><a href="#forin语句" class="headerlink" title="forin语句"></a>forin语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var string = &quot;&quot;</span><br><span class="line">for i in 0..&lt;10 &#123;</span><br><span class="line">    string += String(i)</span><br><span class="line">&#125;</span><br><span class="line">string</span><br><span class="line">for character in &quot;Hello&quot;.characters &#123;</span><br><span class="line">    print(&quot;\(character)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">let finalSquare = 25</span><br><span class="line">var board = [Int](repeating: 0, count: finalSquare + 1)</span><br><span class="line">board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02;</span><br><span class="line">board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08;</span><br><span class="line"></span><br><span class="line">var square = 0</span><br><span class="line">var ran = 0</span><br><span class="line">while square &lt; finalSquare &#123;</span><br><span class="line">    ran = Int(arc4random() % 6 + 1)</span><br><span class="line">    print(ran)</span><br><span class="line">    square += ran</span><br><span class="line">    if square &lt; board.count &#123;</span><br><span class="line">        square += board[square]</span><br><span class="line">    &#125;</span><br><span class="line">    print(square)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">square = 0</span><br><span class="line">repeat &#123;</span><br><span class="line">    ran = Int(arc4random() % 6 + 1)</span><br><span class="line">    print(&quot;骰子点数：\(ran)&quot;)</span><br><span class="line">    square += ran</span><br><span class="line">    if square &lt; board.count &#123;</span><br><span class="line">        square += board[square]</span><br><span class="line">    &#125;</span><br><span class="line">    print(&quot;爬升位置：\(square)&quot;)</span><br><span class="line">&#125; while square &lt; finalSquare</span><br><span class="line"></span><br><span class="line">square = 0</span><br><span class="line">print(&quot;game start!&quot;)</span><br><span class="line">gameLoop: while square != finalSquare &#123;</span><br><span class="line">    ran = Int(arc4random() % 6 + 1)</span><br><span class="line">    print(&quot;摇出：\(ran)&quot;)</span><br><span class="line">    switch square + ran &#123;</span><br><span class="line">    case finalSquare:</span><br><span class="line">        print(&quot;胜利&quot;)</span><br><span class="line">        break gameLoop</span><br><span class="line">    case let sum where sum &gt; finalSquare:</span><br><span class="line">        print(&quot;接近终点&quot;)</span><br><span class="line">        continue gameLoop</span><br><span class="line">    default:</span><br><span class="line">        square += ran</span><br><span class="line">        print(&quot;走到了：\(square)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="条件语句if、switch"><a href="#条件语句if、switch" class="headerlink" title="条件语句if、switch"></a>条件语句if、switch</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let character: Character = &quot;a&quot;</span><br><span class="line">switch character &#123;</span><br><span class="line">case &quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;:</span><br><span class="line">    print(&quot;字符是元音字符&quot;)</span><br><span class="line">default:</span><br><span class="line">    print(&quot;字符是辅音字符&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="区间匹配…"><a href="#区间匹配…" class="headerlink" title="区间匹配…"></a>区间匹配…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">let count = 10</span><br><span class="line">switch count &#123;</span><br><span class="line">case 0...9:</span><br><span class="line">    print(&quot;number is one digit&quot;)</span><br><span class="line">case 10...99:</span><br><span class="line">    print(&quot;number is two digit&quot;)</span><br><span class="line">case 100...999:</span><br><span class="line">    print(&quot;number is three digit&quot;)</span><br><span class="line">default:</span><br><span class="line">    print(&quot;more digit!&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let apoint = (1, 1)</span><br><span class="line">switch apoint &#123;</span><br><span class="line">case (0, 0):</span><br><span class="line">    print(&quot;point is at the origin&quot;)</span><br><span class="line">case (_, 0):</span><br><span class="line">    print(&quot;point is on the y-aixs&quot;)</span><br><span class="line">case (0, _):</span><br><span class="line">    print(&quot;point is on the x-aixs&quot;)</span><br><span class="line">case (-2...2, -2...2):</span><br><span class="line">    print(&quot;point is inside of the box&quot;)</span><br><span class="line">default:</span><br><span class="line">    print(&quot;point is outside of the box&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="值绑定"><a href="#值绑定" class="headerlink" title="值绑定"></a>值绑定</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let bpoint = (2, 3)</span><br><span class="line">switch bpoint &#123;</span><br><span class="line">case (let x, 0):</span><br><span class="line">    print(&quot;on the x-axis with an x value of \(x)&quot;)</span><br><span class="line">case (0, let y):</span><br><span class="line">    print(&quot;on the y-axis with an y value of \(y)&quot;)</span><br><span class="line">case let (x, y):</span><br><span class="line">    print(&quot;somewhere else at (\(x), \(y))&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="where条件匹配"><a href="#where条件匹配" class="headerlink" title="where条件匹配"></a>where条件匹配</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let cpoint = (-3, 3)</span><br><span class="line">switch cpoint &#123;</span><br><span class="line">case let (x, y) where x + y == 0:</span><br><span class="line">    print(&quot;(\(x), \(y)) is on the line y = -x&quot;)</span><br><span class="line">case let (x, y) where x - y == 0:</span><br><span class="line">    print(&quot;(\(x), \(y)) is on the line y = x&quot;)</span><br><span class="line">case let (x, y):</span><br><span class="line">    print(&quot;(\(x), \(y)) is just some arbitrary point&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="控制转移语句break、continue等"><a href="#控制转移语句break、continue等" class="headerlink" title="控制转移语句break、continue等"></a>控制转移语句break、continue等</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let aSymbol: Character = &quot;三&quot;</span><br><span class="line">var possibleIntegerValue: Int?</span><br><span class="line">switch aSymbol &#123;</span><br><span class="line">case &quot;1&quot;, &quot;一&quot;, &quot;壹&quot;:</span><br><span class="line">    possibleIntegerValue = 1</span><br><span class="line">case &quot;2&quot;, &quot;二&quot;, &quot;贰&quot;:</span><br><span class="line">    possibleIntegerValue = 2</span><br><span class="line">case &quot;3&quot;, &quot;三&quot;, &quot;叁&quot;:</span><br><span class="line">    possibleIntegerValue = 3</span><br><span class="line">default:</span><br><span class="line">    break;//跳出switch，possibleIntegerValue为nil</span><br><span class="line">&#125;</span><br><span class="line">if let index = possibleIntegerValue &#123;</span><br><span class="line">    print(&quot;find it at \(index)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/11/Js中的事件/" itemprop="url">
                  Js中的事件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-11T12:23:08+08:00" content="2017-03-11">
              2017-03-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>永远不屈于命运的抗争……<br></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE Html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;事件&lt;/title&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;./Util.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;./script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;!-- 事件流:描述的是从页面中接受事件的顺序 --&gt;</span><br><span class="line">	&lt;!-- 1事件冒泡（IE）: 即事件最开始由最具体的元素（文档中嵌套层次最深的那个节点）接收，然后逐级向上传播至最不具体的那个节点。 --&gt;</span><br><span class="line">	&lt;!-- 2事件捕获: 不太具体的节点应该更早的接收到事件，而最具体的节点最后接收到事件。 --&gt;</span><br><span class="line">	&lt;div id=&quot;box&quot;&gt;</span><br><span class="line">		&lt;!-- 事件处理程序 --&gt;</span><br><span class="line">		&lt;!-- 1 HTML事件处理程序：标签关联的事件直接写在HTML文档中。弊端是耦合度高。 --&gt;</span><br><span class="line">		&lt;input type=&quot;button&quot; value=&quot;button_1&quot; id=&quot;btn1&quot; onclick=&quot;showMessage()&quot;&gt;</span><br><span class="line">		&lt;!-- 2 DOM0级事件处理程序：把一个函数赋值给一个事件的处理程序属性。优点：简单、跨浏览器 --&gt;</span><br><span class="line">		&lt;input type=&quot;button&quot; value=&quot;button_2&quot; id=&quot;btn2&quot;&gt;</span><br><span class="line">		&lt;!-- 3 DOM2级事件处理程序：定义两个方法addEventListener()和removeEventListener()用于处理指定和删除事件处理程序的操作。他们要接收三个参数：要处理的事件名、作为事件处理程序的函数、触发的阶段 --&gt;</span><br><span class="line">		&lt;input type=&quot;button&quot; value=&quot;button_3&quot; id=&quot;btn3&quot;&gt;</span><br><span class="line">		&lt;!-- 4 IE事件处理程序：定义的两个方法是attachEvent()和detachEvent()他们要接收两个个参数：要处理的事件名、作为事件处理程序的函数 --&gt;</span><br><span class="line">		&lt;input type=&quot;button&quot; value=&quot;button_4&quot; id=&quot;btn4&quot;&gt;</span><br><span class="line">		&lt;!-- 5 跨浏览器事件处理程序：运用能力检测，通过2、3、4将事件添加到标签上 --&gt;</span><br><span class="line">		&lt;input type=&quot;button&quot; value=&quot;button_5&quot; id=&quot;btn5&quot;&gt;</span><br><span class="line"></span><br><span class="line">		&lt;!-- 事件对象：在触发DOM上的事件时都会产生一个对象，包含了事件相关的信息 --&gt;</span><br><span class="line">		&lt;!-- DOM中事件对象event的重要属性和方法：type(事件类型)，target(事件发生的标签);</span><br><span class="line">		                                     stopPropagation()阻止事件冒泡，preventDefault()取消事件的默认行为 --&gt;</span><br><span class="line">		&lt;!-- DOM中事件对象event的重要属性和方法：type(事件类型)，srcElement(事件发生的标签);</span><br><span class="line">		                                     cacelBubble(是否阻止事件冒泡)，returnValue(是否取消事件的默认行为) --&gt;</span><br><span class="line">		&lt;a href=&quot;www.baidu.com&quot;&gt;该标签的跳转被取消了&lt;/a&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>Util.js文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">var eventUtil = &#123;</span><br><span class="line">	    //  给元素指定的操作添加事件</span><br><span class="line">		addHandler:function(element,type,handler) &#123;</span><br><span class="line">			if (element.addEventListener) &#123;</span><br><span class="line">				element.addEventListener(type,handler,false);</span><br><span class="line">			&#125; else if (element.attachEvent) &#123;</span><br><span class="line">				element.attachEvent(type,handler);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				element[&apos;on&apos;+type] = handler;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">	    // 移除事件绑定</span><br><span class="line">		removeHandler:function(element,type,handler) &#123;</span><br><span class="line">			if (element.removeEventListener) &#123;</span><br><span class="line">				element.removeEventListener(type,handler,false);</span><br><span class="line">			&#125; else if (element.detachEvent) &#123;</span><br><span class="line">				element.detachEvent(element,handler);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				element[&apos;on&apos;+type] = null;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 获取事件</span><br><span class="line">		getEvent:function(event) &#123;</span><br><span class="line">			return event||window.event;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 获取事件类型</span><br><span class="line">		getType:function(event) &#123;</span><br><span class="line">			return event.type;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 获取事件作用的元素</span><br><span class="line">		getElement:function(event) &#123;</span><br><span class="line">			return event.target?event.target:event.srcElement;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 阻止事件冒泡（父视图也想应该事件）</span><br><span class="line">		preventDefault:function(event) &#123;</span><br><span class="line">			if (event.preventDefault) &#123;</span><br><span class="line">				event.preventDefault();</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				event.returnValue=false;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 取消元素触发的事件的默认行为</span><br><span class="line">		stopPropagation:function(event) &#123;</span><br><span class="line">			if (event.stopPropagation) &#123;</span><br><span class="line">				event.stopPropagation();</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				event.cancelBubble=true;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>script.js文件…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">function showMes (event) &#123;</span><br><span class="line">	alert(event.type);</span><br><span class="line">	alert(event.target);</span><br><span class="line">	event.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line">function showBox(event) &#123;</span><br><span class="line">	alert(this);</span><br><span class="line">&#125;</span><br><span class="line">function showMessage() &#123;</span><br><span class="line">	alert(&apos;hello word!&apos;);</span><br><span class="line">&#125;</span><br><span class="line">function stopGoto(event) &#123;</span><br><span class="line">	alert(&apos;不能跳转的a标签&apos;);</span><br><span class="line">	event.stopPropagation();</span><br><span class="line">	event.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line">window.onload = function() &#123;</span><br><span class="line">	var btn2 = document.getElementById(&apos;btn2&apos;);</span><br><span class="line">	btn2.onclick = function () &#123;</span><br><span class="line">		alert(&apos;通过DOM0级添加的事件！&apos;);</span><br><span class="line">	&#125;;</span><br><span class="line">	btn2.onClick=null;</span><br><span class="line">	// DOM2级事件</span><br><span class="line">	var btn3 = document.getElementById(&apos;btn3&apos;);</span><br><span class="line">	btn3.addEventListener(&apos;click&apos;,showMessage,false);</span><br><span class="line">	btn3.removeEventListener(&apos;click&apos;,showMessage,false);</span><br><span class="line">	btn3.addEventListener(&apos;click&apos;,function()&#123;</span><br><span class="line">		alert(this.value);</span><br><span class="line">	&#125;,false);</span><br><span class="line">	// for IE</span><br><span class="line">	// var btn4 = document.getElementById(&apos;btn4&apos;);</span><br><span class="line">	// btn4.attachEvent(&apos;onclick&apos;,showMessage);</span><br><span class="line">	// btn4.detachEvent(&apos;onclick&apos;,showMessage);</span><br><span class="line"></span><br><span class="line">	var btn5=document.getElementById(&apos;btn5&apos;);</span><br><span class="line">	eventUtil.addHandler(btn5,&apos;click&apos;,showMes);</span><br><span class="line">	var box=document.getElementById(&apos;box&apos;);</span><br><span class="line">	eventUtil.addHandler(box,&apos;click&apos;,showBox);</span><br><span class="line">	var a=document.getElementsByTagName(&apos;a&apos;)[0];</span><br><span class="line">	eventUtil.addHandler(a,&apos;click&apos;,stopGoto);</span><br><span class="line"></span><br><span class="line">	eventUtil.addHandler(a,&apos;click&apos;,function(e) &#123;</span><br><span class="line">		e = eventUtil.getEvent(e);</span><br><span class="line">		alert(eventUtil.getType(e));</span><br><span class="line">		alert(eventUtil.getElement(e).nodeName);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/02/生命如歌：离别/" itemprop="url">
                  生命如歌：离别
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-02T22:03:44+08:00" content="2017-03-02">
              2017-03-02
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>　原谅分别的那天我那令人愤怒的行为…<br><br>　早上的时候父亲的一句话就把我从睡梦中叫醒！那是早上六点，我知道今天我就要走了！从来没有感觉年过的如此之快过。时间在我们身边仿佛跑的很快，由不得你起身去追它。虽然今天就要与你分别，但想到一两个小时后就能见到你，竟也希望时间过得再快些。<br><br>　坐上车才追悔莫及，居然一个分别的拥抱都没有，就连临别的吻都显得那么仓促。拿到你为我准备的东西后，你往西，我往东，我越走越慢，但距离却越来越远。我为什么要急着和你分开呢？担心早上雾水打湿你的头发，还是贪恋离别后那种无法名状的思念的味道。现在想来我真是太傻了，贪恋味道变成忍受焦苦。这焦苦仿佛是一个漩涡让人深陷其中，你越是想挣脱它却又显得越深，直到完全把人吞噬掉，才明白这相思苦且无药！<br><br>  驱车一路到县城，刚开始的时候雾气还没有那么浓。大概是从9点开始吧，雾渐渐笼罩了头上的天空，可笼罩了去往北京的路。第一辆车一来大家都蜂拥而至的堵到车门口，我当时就心想：坏了，这辆车是做不上了！果然无论我多么努力的往里挤还是没能挤上去。姐姐和姐夫还笑我空长了那么高的个子。我并没有感觉有什么羞愧的，只是暗暗的觉得我一个人倒也无所谓的，如果是咱们两个出行我得选择比较靠谱的火车。就这样，只能等下一班车了。谁知这一等就等到了下午六点！<br><br>　送君千里终有一别！我也只能这样安慰自己了。从早上8点吧直到下午为你说没能准时坐上车走掉这之间的分分秒秒…那滋味仿佛仿佛手捧一条脱离水的鱼，去寻找那不知道方向和位置的河流。等待车来并不可怕，可怕的是那种没有告诉你的恐惧。仿佛一个打破热水壶的小男孩，虽然知道舅舅、舅妈并不会责罚，但还要等到着他们下地回来！<br><br>　现在已到了北京，北京虽然也冷但却是晴天。没有去工作的我不知道以何种姿态消磨着这时光！我又该如何描述现在的心情呢？这种状态只有等到遇见你才会有好转吧！<br><br>　2017年2月6号深夜<br><br>　北京<br></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/11/生命如歌：我要你/" itemprop="url">
                  生命如歌：我要你
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-11T18:47:20+08:00" content="2016-11-11">
              2016-11-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2016.11.11上午9点42，4.1.0版本开发测试完毕，等待上线审核……<br><br>好久没有更新关于技术相关的文章了。先说一个关于编译异常的问题，使用cocoapods管理第三发库的时候，遇到的无法找到对应的第三方库。执行<code>pod install</code>后，编译还是有异常。好吧，到工程所在目录，找到<code>Podfile.lock、Pods文件夹、xxx.xcworkspage</code>删除后再次执行<code>pod install</code>命令，打开新生成的<code>xxx.xcworkspage</code>异常解除，可以编码了。这种情况常发生于刚下载一个工程时。<br><br>（呃…我一直在想怎么完成对下一个话题的切换，算了还是直接来吧！）<br><br>突然想到之前看到的一个电影《驴得水》，讲述了在偏远的山区的五个人吃着“吕得水”老师的补助，当有一天特派员来视察时，为了掩饰其实根本就没有这一个人而上演的一出比一出荒诞的闹剧。一开始开的时候，真的以为它是一部喜剧，最多像其它电影一样表达一下爱呀、生命呀之类的主题。但当看完时却发现它是一个剖析人性的电影。我像导演是有很多想法要表达的，他也做到了这一点。印象最深的还是张一曼，一个追求自由与美的，也是剧中唯一一个终结了生命的人。关于她看到镜中被剪掉头发后如此激烈的反应和最后的自杀我一开始是不理解的。她最美的时刻还是坐在阳光下、原野上唱着歌的时候，那时候特派员还没来，大家的生活也是一片祥和。但从特派员来开始，谎言、闹剧也就开始了，那隐藏在祥和之下种种矛盾和丑陋也一一被揭开。原来生活不止眼前的祥和，也有丑陋、贪婪与伤痛。逃离城里的她，发现这唯一可以容忍的地方也在风暴来临时万象丛生。那记忆中五个人穿着自己做的崭新、美丽的校服的场景永远不可能出现了。对人性的考验让她看清了这个世界，与其粉饰太平不如追随着自己的梦想永远的逝去…这也就解释了她最后的选择是那样的原因。<br></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">我要 你在我身旁</span><br><span class="line">我要 你为我梳妆</span><br><span class="line">这也的风儿吹</span><br><span class="line">吹的心痒痒 我的情郎</span><br><span class="line">我在他乡 望着月亮</span><br><span class="line">都怪这月色 撩人的疯狂</span><br><span class="line">都怪这Guitar 弹的太凄凉</span><br><span class="line">欧 我要唱着歌</span><br><span class="line">默默把你想 我的情郎</span><br><span class="line">你在何方 眼看天亮</span><br><span class="line">都怪这夜色 撩人的疯狂</span><br><span class="line">都怪这Guitar 弹的太凄凉</span><br><span class="line">欧 我要唱着歌</span><br><span class="line">默默把你想 我的情郎</span><br><span class="line">我要 美丽的衣裳</span><br><span class="line">为你 为你对镜贴花黄</span><br><span class="line">这夜色太紧张</span><br><span class="line">时间太漫长 我的情郎</span><br><span class="line">我在他乡 望着月亮</span><br></pre></td></tr></table></figure>
<p>在她眼里，蒜皮可以是飞舞的雪花～<br><br>什么？你说这TM不是一个技术相关的文章么，呃～突然想起一个词“图文无关”。😄</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/生命如歌：旅行（一）/" itemprop="url">
                  生命如歌：旅行（一）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-18T14:19:07+08:00" content="2016-10-18">
              2016-10-18
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>10月8号，下午1点58分，新版本开发之初…<br><br>千里之外的成都，七天短暂的时光，俩个人的旅行。<br><br>0929晚，距离出发还有一个白昼和两个黑夜。回到家准备收拾东西。先找一下身份证，毕竟这是关键中的关键。<strong><em>赶紧找找吧～</em></strong>先在电脑桌旁的收纳箱中找一找…一分钟后没有找到；好吧，捉迷藏是吧！把东西全都倒出来又找了一遍，结果还是没有它的任何踪迹。<strong><em>心慌慌～</em></strong>扩大查找范围，卧室的阳台和床铺、衣柜和里面的盒子、所有衣服的口袋和其他可能藏东西的地方。一分钟，五分钟，十分钟…<strong><em>瞬间懵了～</em></strong>它为什么会找不到？它可能在哪里呀？难道是丢了吗？它会丢在哪里？我该如何坐上后天的火车？一系列的疑问与焦虑涌上心头。不，我不能放弃，我还得再找找。Once Again…还是一无所获！<strong><em>抓狂，然后绝望～</em></strong>我开始怀疑人生，感觉这一切都是假象，老天爷为什么给我开这样的玩笑。<br><br>呜呜呜…<br><br>坐在那里回想最近都去了哪里？哪里有可能有它的踪迹？</p>
<ul>
<li>今天周四，上班；</li>
<li>昨天周三，上班；</li>
<li>前天周二，上班；</li>
<li>大前天周一，上班；</li>
<li>上周日休息；</li>
<li>上周六干什么来着？对，去报驾校！</li>
</ul>
<p>报驾校.报驾校..报驾校…哦！报驾校需要带身份证！吼吼吼！！！原来是留在那办暂住证了！呼～我的妈呀，吓死本宝宝了！幸好是今天发现的，要是等到明天才知道，啧啧啧！直接🐶带～<br><br>第二天的一大早，两个小时的路程赶到驾校。果然，也有很多同学今天来这里拿身份证，毕竟明天就是假期的第一天了！询问管理人员，说我的还在派出所办理业务，让下午四点再来这认领。<br><br>一切美好的事物都是值得等待的…我用这就话安慰自己，但从现在的结果来看果然一切都是最好的安排。假如周一到周四的任何一天来到这里都会因为没有办好暂住证而无功而返；假如周五晚上发现这一切又为时已晚。仿佛老天爷真的给我开了个玩笑。The joke let me know what I care and who I love!<br><br>一小时，又一小时，一次讯问，又一次讯问。还是当初那位管理人员说的对，终于在下午三点五十几分的时候拿到了我的身份证！赶回家，收拾东西，等待天黑，又等待天明……<br><br><a href="http://music.163.com/#/song?id=399353390" target="_blank" rel="external">萧敬腾版的张三的歌</a></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/21/生命如歌：我喜欢的样子你都有/" itemprop="url">
                  生命如歌：我喜欢的样子你都有
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-21T11:33:53+08:00" content="2016-09-21">
              2016-09-21
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>0921，上午9点07分。距离见到亲爱的宝贝还有10天，哇哦！激动的不要不要的！！！(三个惊叹号)<br><br>昨天晚上，下班的路上看到知乎上宝贝邀请我回答关于<a href="http://www.zhihu.com/question/33436102" target="_blank" rel="external">有个胖胖的女朋友是一种什么样的体验？</a>。我的天，谁说你月半的，叫他放学后别走，保证打的他肿三圈！我也附上了我的回答，宝贝看到了可千万别打我呀！呜呜～<br><br>爱一个人是什么感觉，这让我想起了张爱玲的一句话：等待雨，是伞一生的宿命。无时无刻的想念会吞噬掉你的灵魂。早晨起来你会想她是否此刻也醒了，晚上做梦有没有梦到自己。买早餐的时候会想起她，自己叮嘱的按时吃饭她有没有照做。我买的饼加鸡蛋很好吃，猜她也应该很喜欢的，想下次见面的时候也给她带一份吧！吃午饭的时候，拍一张美食的照片吧，她问起的时候好跟她分享！工作的时候要专注于手下的键盘，专注于眼前的显示器。因为你稍有分神就会想起她，想她此刻在忙什么，是否也想到了自己。<br></p>
<ul>
<li>红豆生南国</li>
<li>春来发几支</li>
<li>劝君多采撷</li>
<li>此物最相思</li>
</ul>
<p>闲暇时瞥见为她抄的诗又忍不住写了一遍。晚饭想赶紧吃完，然后坐上地铁，跟亲爱的你打个招呼“下班会窝了”(有你的地方才叫家)！一路上每次QQ提示音响起都是一段美丽的音符……就这样你我分享生活中的小事，督促彼此按时吃饭、每晚洗漱，然后向你说晚安后才肯安稳睡觉！<br><br>这或是思念，或是爱。但这感觉是如此的真切，仿佛你不曾离开过。<br><br>我喜欢的样子你都有。宝贝就是这么好，肤白貌美、聪明可爱。开心的时候会微笑，甜蜜的笑容像糖果，心里像吃了一包大白兔奶糖，让人想忍不住的吻一下；也像毒药，而我就是那个身中剧毒之人。伤心的时候会流泪，楚楚可怜，让听到、看到的人也跟着落泪，想给你一个拥抱。生气的时候又那么好哄，一顿美食、几句安慰的话、发自内心的道歉，就连你愤怒的时候也让人感觉不能离开你。最怕的是没有的消息，让人心慌慌，像一个孩子丢失了心爱的玩具。爱就是这个样子，爱你美丽火红的花朵，也爱你保护自己锋利的刺。<br><br>就在今天早上，你说“我真的好害怕，明明想展示自己好的一面却莫名其妙越弄越糟，表现的一塌糊涂，我自己都不认识我自己了[哭]”亲爱的宝贝，我想说“我喜欢的样子你都有，为你着魔。无论你高矮月半瘦，无论你生气开心，无论你表现的糟糕或完美，都那么让人心弛神往！”。有时候我也是，在你生气伤心的时候，明明想安慰你的，可又弄巧成拙。但即使你说我、骂我，我都心甘情愿的守候着，只是因为当你又情绪要发泄的时候，我都在你身边(或电话的另一边)。哪怕就是干耗着，也希望等到风暴过后与你一起看彩虹！<br><br>十、九、八、七、六、五、四、三、二、一……<br><br>哇哦！时间过的那么快，也过得那么慢！<br>特喜欢周董<a href="http://music.163.com/#/m/song?id=185820" target="_blank" rel="external">甜甜的</a>里的一句歌词<strong>“我轻轻地尝一口 这香浓的诱惑<br>我喜欢的样子你都有”</strong></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/20/iOS多线程总结/" itemprop="url">
                  iOS多线程总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-20T09:54:17+08:00" content="2016-08-20">
              2016-08-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="交付队列与交付线程"><a href="#交付队列与交付线程" class="headerlink" title="交付队列与交付线程"></a>交付队列与交付线程</h4><p>iOS实现多线程编程的三种方法：<br></p>
<ol>
<li>NSThread：显示的(根据要执行的操作)创建线程</li>
<li>NSOpreation、NSOperationQueue：通过将任务封装成operation、创建和使用queue的方式实现多线程编程</li>
<li>GCD：将任务放在block中、创建和使用dispatch_queue_t的方式实现多线程编程</li>
</ol>
<p>后两者抽象层度更高(不显示的创建线程却可以实现多线程编程)，它们的相似点也很多：任务都被封装，都是通过交付队列的方式开始执行。任务真正被执行是在线程中，我们只是将任务交付给队列，队列帮我们选择或创建线程去执行他们。也可以将操作队列简单的理解成一种先进先出的数据结构。<br><br>在GCD中实现并行与串行是将任务交付给对应的并行与串行队列，在NSOperationQueue中可以通过添加依赖或设置最大并发数实现，<br><code>[[NSOperationQueue alloc] init]</code><br>返回GCD中的并行队列<code>dispatch_queue_create(&quot;com.alin.multithread.concurrentQueue&quot;, DISPATCH_QUEUE_CONCURRENT)</code>。并行队列将先入对的任务交付线程执行，然后接着交付下一个，而不管前一个是否完成(通常情况下…)。串行队列可以理解成等待前一个执行完成后再交付下一个任务开始执行。银行的都个窗口就像多个串行多列，先拿到号码的可以先办理任务，下一个人必须等待前一个完成。并行队列就像大家排队领申请表，领完后去一边填写，谁先填写完交上去的顺序不定，但领表的顺序是先来先领的。<br></p>
<h4 id="异步与同步"><a href="#异步与同步" class="headerlink" title="异步与同步"></a>异步与同步</h4><p>同步：就是在发出一个功能调用时，在没有得到结果之前，该调用就不返回。<br><br>异步：异步的概念和同步相对。当一个异步过程调用发出后，调用者不会立刻得到结果。实际处理这个调用的部件是在调用发出后，通过状态、通知来通知调用者，或通过回调函数处理这个结果。</p>
<h4 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h4><p><img src="http://o7nzfbf8y.bkt.clouddn.com/images-blog-20160819-01.png" alt="多线程下载图片"></p>
<p>demo是一个简单的singleViewApplication，控制器中的视图有4个imageView，顶部左边是一个切换队列的barButtonItem，右边是一个开始下载的barButtonItem，点击后开始下载任务。<br><br><strong>.h文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line"></span><br><span class="line">typedef NS_ENUM(NSInteger, TaskQueueType) &#123;</span><br><span class="line">    TaskQueueType_Serial,</span><br><span class="line">    TaskQueueType_Concurrent</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@interface ViewController ()</span><br><span class="line">//四个imageView</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIImageView *imageView1;</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIImageView *imageView2;</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIImageView *imageView3;</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIImageView *imageView4;</span><br><span class="line">//两个按钮</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIBarButtonItem *leftItem;</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIBarButtonItem *rightItem;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, assign) BOOL imageLoading;/**&lt; 是否正在下载 */</span><br><span class="line">@property (nonatomic, assign) NSInteger finishedSign;/**&lt; “信号量”为4的时候表示下载全部完成 */</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) dispatch_queue_t gcd_taskQueue;/**&lt; gcg队列 */</span><br><span class="line">@property (nonatomic, strong) NSOperationQueue *ns_taskQueue;/**&lt; cocoa队列 */</span><br><span class="line"></span><br><span class="line">@property (nonatomic, assign) TaskQueueType type;/**&lt; 队列类型 */</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>.m文件</strong><br><br>切换下载的队列：通过<code>#define kUseCocoaTaskQueue 1</code>宏定义可是选择使用GCD还是NSOperation、NSOperationQueue。在使用后者的过程中是通过设置最大并发数<code>maxConcurrentOperationCount</code>实现同步的效果，其实更准确的应该是设置任务间的依赖关系<code>[operation2 addDependency:operation1]</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)handleChangeDispatchQueueAction:(UIBarButtonItem *)sender &#123;</span><br><span class="line">    if (self.imageLoading) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">#ifdef kUseCocoaTaskQueue</span><br><span class="line">    if (!self.ns_taskQueue) &#123;</span><br><span class="line">        self.ns_taskQueue = [[NSOperationQueue alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    if (self.type == TaskQueueType_Concurrent) &#123;</span><br><span class="line">        self.type = TaskQueueType_Serial;</span><br><span class="line">        sender.title = @&quot;串行&quot;;</span><br><span class="line">        self.ns_taskQueue.maxConcurrentOperationCount = 1;</span><br><span class="line">    &#125; else if (self.type == TaskQueueType_Serial) &#123;</span><br><span class="line">        self.type = TaskQueueType_Concurrent;</span><br><span class="line">        sender.title = @&quot;并行&quot;;</span><br><span class="line">        self.ns_taskQueue.maxConcurrentOperationCount = -1;</span><br><span class="line">    &#125;</span><br><span class="line">#else</span><br><span class="line">    if (self.type == TaskQueueType_Concurrent) &#123;</span><br><span class="line">        self.type = TaskQueueType_Serial;</span><br><span class="line">        sender.title = @&quot;串行&quot;;</span><br><span class="line">        self.gcd_taskQueue = dispatch_queue_create(&quot;com.alin.multithread.serialQueue&quot;, DISPATCH_QUEUE_SERIAL);</span><br><span class="line">    &#125; else if (self.type == TaskQueueType_Serial) &#123;</span><br><span class="line">        self.type = TaskQueueType_Concurrent;</span><br><span class="line">        sender.title = @&quot;并行&quot;;</span><br><span class="line">        self.gcd_taskQueue = dispatch_queue_create(&quot;com.alin.multithread.concurrentQueue&quot;, DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">    &#125;</span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>开始下载：其中<code>[self imageUrlStringArray]</code>返回一个数组包含四个图片的URL字符串，<code>[self presentImageViewArray]</code>包含四个对应的imageView。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">- (IBAction)handleStartBtnAction:(UIBarButtonItem *)sender &#123;</span><br><span class="line">    if (self.imageLoading) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">#ifdef kUseCocoaTaskQueue</span><br><span class="line">    if (!self.ns_taskQueue) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">#else </span><br><span class="line">    if (!self.gcd_taskQueue) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">#endif</span><br><span class="line">    NSArray *presentArray = [self presentImageViewArray];</span><br><span class="line">    for (UIImageView *imageView in presentArray) &#123;</span><br><span class="line">        imageView.image = nil;</span><br><span class="line">    &#125;</span><br><span class="line">    self.finishedSign = 0;</span><br><span class="line">    self.imageLoading = YES;</span><br><span class="line">    NSInteger index = 0;</span><br><span class="line">    for (NSString *urlString in [self imageUrlStringArray]) &#123;</span><br><span class="line">        [self startLoadingImageWithUrlString:urlString presentImageView:presentArray[index]];</span><br><span class="line">        index ++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将任务提交给队列：开始执行初始化NSBlockOperation用到的block时，进入了线程(虽然我们没有显示的创建一个子线程)。现在完成后需要切换到主线程加载image。从结果来看<code>dispatch_async(dispatch_get_main_queue(), &lt;^(void)block&gt;)</code>和<code>[[NSOperationQueue mainQueue] addOperation:[NSBlockOperation blockOperationWithBlock:&lt;^(void)block&gt;]]</code>效果一样。修改信号量的操作<code>self.finishedSign ++</code>应该和接下来的判断保持原子性，幸好它们是在主串行队列，其他任务会等待到判断<code>if (self.finishedSign &gt;= 4)</code>和附值<code>self.imageLoading = NO</code>完成后再继续执行。因此不会造成“多线程买票”出现票数为负(不加锁)的异常情况。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">- (void)startLoadingImageWithUrlString:(NSString *)urlString presentImageView:(UIImageView *)imageView &#123;</span><br><span class="line">#ifdef kUseCocoaTaskQueue</span><br><span class="line">    NSBlockOperation *downloadOperation = [NSBlockOperation blockOperationWithBlock:^&#123;</span><br><span class="line">        /**</span><br><span class="line">         *  子线程中...</span><br><span class="line">         */</span><br><span class="line">        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];</span><br><span class="line">        UIImage *image = [UIImage imageWithData:data];</span><br><span class="line">        if (image) &#123;</span><br><span class="line">            dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                imageView.image = image;</span><br><span class="line">                self.finishedSign ++;</span><br><span class="line">                if (self.finishedSign &gt;= 4) &#123;</span><br><span class="line">                    self.imageLoading = NO;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            /**</span><br><span class="line">             *  从实际的imageView加载image的速度来看，现在是在子线程中进行的，</span><br><span class="line">             *  若不使用上面带有回到主线程操作的代码，则imageView时机显示image的速度将变得很慢</span><br><span class="line">             */</span><br><span class="line">            /*</span><br><span class="line">            imageView.image = image;</span><br><span class="line">            self.finishedSign ++;</span><br><span class="line">            if (self.finishedSign &gt;= 4) &#123;</span><br><span class="line">                self.imageLoading = NO;</span><br><span class="line">            &#125;</span><br><span class="line">             */</span><br><span class="line">            //或者这样会到主线程。</span><br><span class="line">            [[NSOperationQueue mainQueue] addOperation:[NSBlockOperation blockOperationWithBlock:^&#123;</span><br><span class="line">                imageView.image = image;</span><br><span class="line">                self.finishedSign ++;</span><br><span class="line">                if (self.finishedSign &gt;= 4) &#123;</span><br><span class="line">                    self.imageLoading = NO;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    [self.ns_taskQueue addOperation:downloadOperation];</span><br><span class="line">#else</span><br><span class="line">    dispatch_async(self.gcd_taskQueue, ^&#123;</span><br><span class="line">        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];</span><br><span class="line">        UIImage *image = [UIImage imageWithData:data];</span><br><span class="line">        if (image) &#123;</span><br><span class="line">            dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                imageView.image = image;</span><br><span class="line">                self.finishedSign ++;</span><br><span class="line">                if (self.finishedSign &gt;= 4) &#123;</span><br><span class="line">                    self.imageLoading = NO;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用任务任务组的形式也可以实现“信号量”的效果，在四个下载任务完成后更改<code>imageLoading</code>标识量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- (void)startAllLoadTask &#123;</span><br><span class="line">    dispatch_group_t group = dispatch_group_create();</span><br><span class="line">    NSArray *presentArray = [self presentImageViewArray];</span><br><span class="line">    NSArray *stringArray = [self imageUrlStringArray];</span><br><span class="line">    dispatch_apply(4, self.gcd_taskQueue, ^(size_t index) &#123;</span><br><span class="line">        NSLog(@&quot;Commit Task %@&quot;,[NSThread currentThread]);</span><br><span class="line">        dispatch_group_async(group, self.gcd_taskQueue, ^&#123;</span><br><span class="line">            NSLog(@&quot;Start Loading In thread %@&quot;,[NSThread currentThread]);</span><br><span class="line">            NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:stringArray[index]]];</span><br><span class="line">            UIImage *image = [UIImage imageWithData:data];</span><br><span class="line">            if (image) &#123;</span><br><span class="line">                dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    ((UIImageView *)presentArray[index]).image = image;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        //self.finishedSign = 4;</span><br><span class="line">        self.imageLoading = NO;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>交付到并行队列的异步任务会创建多个线程，它们在各自的线程独立执行(并行Parallelism)。<strong>推断：</strong>也有可能两个或多个任务在同一个线程，分别占用不同的时间片并发(Concurrency)执行。</li>
<li>交付到串行队列的异步任务会在一个线程中执行，当一个任务完成时才开始下一个任务。</li>
<li>交付到并行队列的任务(<code>dispatch_apply</code>的block)有可能在主线程执行，也有可能在子线程执行。此时<code>self.gcd_taskQueue</code>是并行队列。</li>
<li>交付到串行对列的任务(<code>dispatch_apply</code>的block)有可能在主线程执行，也有可能在子线程执行(<code>dispatch_group_async</code>的block)。关于<code>dispatch_apply</code>的介绍：<br><strong>Submits a block to a dispatch queue for multiple invocations. This function waits for the task block to complete before returning. If the target queue is concurrent, the block may be invoked concurrently, and it must therefore be reentrant safe. Each invocation of the block will be passed the current index of iteration.</strong>可以看出它的block是一个同步任务。由此可见是否创新子线程与该任务是否是异步有关。此时<code>self.gcd_taskQueue</code>是自定义串行队列。<br><img src="http://o7nzfbf8y.bkt.clouddn.com/image-blog-20160822-01.png" alt=""><br><img src="http://o7nzfbf8y.bkt.clouddn.com/image-blog-20160822-02.png" alt=""></li>
</ol>
<h4 id="选择合适的队列交付合适的任务"><a href="#选择合适的队列交付合适的任务" class="headerlink" title="选择合适的队列交付合适的任务"></a>选择合适的队列交付合适的任务</h4><ul>
<li><strong>并行+异步</strong>：就是真正的并发，新开有多个线程处理任务，任务并发执行，完成的顺序不确定。</li>
<li><strong>串行+异步</strong>：新开一个线程，任务一个接一个执行，上一个任务处理完毕，下一个任务才可以被执行</li>
<li><strong>并行+同步</strong>：这才是做同步工作的好选择，不论是通过调度障碍，或者需要等待一个任务完成才能执行进一步处理的情况。做读写控制的时候会用到。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (NSArray *)photos &#123; //需要等待任务完成才返回</span><br><span class="line">    __block NSArray *array;</span><br><span class="line">    dispatch_sync(self.concurrentPhotoQueue, ^&#123;</span><br><span class="line">        array = [NSArray arrayWithArray:_photosArray];</span><br><span class="line">    &#125;); </span><br><span class="line">    return array; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (void)addPhoto:(Photo *)photo &#123; //任务被执行的时候，队列中其他任务要么已经完成(先于该任务提交的)，要么还未开始。</span><br><span class="line">    if (photo) &#123;</span><br><span class="line">        dispatch_barrier_async(self.concurrentPhotoQueue, ^&#123;</span><br><span class="line">            [_photosArray addObject:photo];</span><br><span class="line">            dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                [self postContentAddedNotification];  </span><br><span class="line">            &#125;); </span><br><span class="line">        &#125;); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>串行+同步</strong>：任务一个接一个执行，如果你正运行在一个队列并调用<code>dispatch_sync</code>放在同一个队列，那你就百分百地创建了一个死锁</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dispatch_sync(dispatch_get_main_queue(), ^&#123;//该语句不能放到主线程中</span><br><span class="line">    NSLog(@&quot;%@&quot;,[NSThread currentThread]);</span><br><span class="line">    NSLog(@&quot;执行了一个在主串行队列上创建的同步任务，该任务被交付到主串行d队列。然而它照成了死锁，并不会执行&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^&#123;//并行队列上提交异步任务，该任务被提交到子线程后返回...</span><br><span class="line">    dispatch_sync(dispatch_get_main_queue(), ^&#123;//该语句不能放到主线程中</span><br><span class="line">        NSLog(@&quot;%@&quot;,[NSThread currentThread]);</span><br><span class="line">        NSLog(@&quot;执行了一个在主串行队列上创建的同步任务，该任务被交付到主串行。此时子线程将挂起，直到该任务完成！&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>参考链接：<br><br><a href="http://www.cocoachina.com/ios/20160201/15179.html" target="_blank" rel="external">主要参考博文</a><br><br><a href="http://www.cocoachina.com/ios/20140428/8248.html" target="_blank" rel="external">讲解GCD深入一点的博文</a><br><br><a href="http://www.cocoachina.com/game/20151201/14517.html" target="_blank" rel="external">如何写好一个NSOperation的子类</a><br><br><a href="http://www.cocoachina.com/ios/20151117/14225.html" target="_blank" rel="external">自定义一个OperationQueue，探究GCD调度队列实现机制</a></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/13/生命如歌－礼物/" itemprop="url">
                  生命如歌－礼物
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-13T10:23:03+08:00" content="2016-08-13">
              2016-08-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>8月1日，下午5点18分。“新公司”的工作有了阶段性的小结：版本开发完毕，测试的童鞋正在测试中…<br><br>距离上一次写点东西已有一个月的时间了。这段时间都忙了什么呢？找工作是其中之一，最重要的要数某位童鞋的生日了O(∩_∩)O。生日对于一个人的重要性不言而喻，它时间为刻度记录了我们的成长，提醒我们明天是新的一个人生阶段的开始…<br><br>还记得是在第一次见你的时候，问了你的生日：0624。你说想要一个和你等身高的布偶(哦，最好不是小熊)，还讲了关于这个礼物背后的故事，它是你小时候的非常渴望得道的礼物，是儿时的一个梦想(估计那时候每到生日的时候你都希望有个一等身高的布偶走到你的身边，让后亲口对你说：“生日快乐”)。为此你还跟自己的父母吵了架。我虽然不知道当时的情形，但却完全能体会到你当时的感受…<br><br>也许每个人小时候都有一件非常渴望得道的东西，天上的一个星星或是印有可爱小兔图案的文具盒。这个愿望就一直潜伏在我们内心深处，时不时的伸出手拨弄我们的心弦。<br><br>一个崭新的属于我自己的书桌。我从小学到初中，乃至高中(虽然那时候都用学校的书桌了)一直都希望自己也有一个。然而，一直是我堂哥那个锢了三圈铁条、你一动它就跟着动的书桌。也曾向父母表达过自己的想法，但结果都是一样的…不记得是哪年夏天的一天，我哥我姐不上学了他们的书桌不用了。我想即使不能换个新的，换个自己亲哥亲姐的、好一点的总该木有问题吧！然而当我再一次向父母表达的想法时，却是又一次的回绝(当时是父母已经答应把书桌给我三姨家的两个孩子了)…当时也是各种期待、争辩、痛哭、沉默。以至于到后来我都希望自己是个哑巴了，那样就不用跟他们争辩了，也不希望他们了解那个潜伏在内心的愿望了。<br><br>…<br><br>时间就这样慢慢的走呀走，我的那个儿时的愿望也抱着时间的尾巴，消失于内心深处。只是突然听到你的故事让我仿佛回到了小时候那个追逐一个书桌梦想的时代…我暗自下定决心，一定要给你买一个。能实现你的梦想比我得道那个书桌还要让我期待，我是那么的爱你～<br><br>终于，一个紫色的小熊还是陪在了你的身边，虽然期间有些不愉快。亲爱的我是那么的爱你，突然发现已渐渐离不开你，无时无刻的想念让我痛恨这空间上的距离。我羡慕那只小熊，羡慕它能此刻能陪在你的身边，羡慕它总是那么称你的心意。我在想，假如有一天我们也天天在一起，我是不是也是你心中的那个“等高的布偶”…<br><br><a href="http://music.163.com/#/song?id=167694" target="_blank" rel="external">礼物－－许巍</a></p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://o7nzfbf8y.bkt.clouddn.com/avatar.png"
               alt="Alin" />
          <p class="site-author-name" itemprop="name">Alin</p>
          <p class="site-description motion-element" itemprop="description">我的职业？你知道的，现在想来，我一直想当个面包师的。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">23</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alin</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  

</body>
</html>
